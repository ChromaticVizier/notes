### 混合索引

#### 一、原理

在检索过程中，同时使用多种检索方式，综合选取候选文档，然后将多种检索结果进行融合，得到最终的检索结果。

![img](https://zhaozhiming.github.io/images/post/2024/06/fusion-retrieve-flow.png)

Query Result选取top-k，最后融合时重排序。

#### 二、流程

##### （一）问题查询

通过 LLM为原始查询生成子查询或相似查询，然后再将生成后的查询传递给检索器。

##### （二）并行检索

在同一数据源上进行不同维度的检索，比如向量检索和关键字检索，也可以是在不同数据源上进行检索，比如文档和数据库。

##### （三）融合结果

需要对检索结果进行去重，因为在检索的多个结果中，有些结果可能是重复的，同时还需要对检索结果进行排序，选出最匹配的检索结果。

#### 三、主要实现方式

##### （一）同个角度，不同检索方法

##### （二）同种检索方法，不同的角度（句、段、页的语义）

### 重排序

#### 一、原理

检索得到的结果不一定和用户想要的结果直接相关，需要对检索结果重新排序（打分）。

传统检索是计算query和文档的相似度